<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Valentine | Ethan Mason's Portfolio</title>
        <!-- Custom CSS -->
        <link rel="stylesheet" href="./valentine.css">
    </head>
    <body>
        <h1>Will You Be</h1>
        <img id="valentine-img" src="./images/suni-w-heart.jpg"></img>
        <h1>My Valentine?</h1>
        <div>
            <!-- If Yes clicked, change img to mort.gif -->
            <button class="valentine-buttons" id="yes-btn">Yes</button>
            <!-- If No clicked, change text to Wrong Answer, then back to No -->
            <button class="valentine-buttons" id="no-btn">No</button>    
        </div>
        <script>
            const imgEl   = document.getElementById('valentine-img');
            const yesBtn  = document.getElementById('yes-btn');
            const noBtn   = document.getElementById('no-btn');

            /* ------------------------------------------------------------------
            1️⃣  Handle the “Yes” click – fade out, swap to GIF, fade in
            ------------------------------------------------------------------*/
            function onYesClicked() {
                yesBtn.textContent = 'Yay!! ❤️';

                imgEl.classList.add('fade-out');

                imgEl.addEventListener('transitionend', function onFadeOutEnd(e){
                        if (e.propertyName !== 'opacity') return;
                        imgEl.addEventListener('load', onGifLoaded, { once:true });
                        playGif();               // change src while still invisible
                }, { once:true });
            }

            function onGifLoaded(){
                imgEl.classList.remove('fade-out');  // now the GIF fades in
            }


            /* ------------------------------------------------------------------
            2️⃣  Handle the “No” click – flash “Wrong Answer”
            ------------------------------------------------------------------*/
            function onNoClicked() {
            const originalText = noBtn.textContent;          // "No"
            const wrongText    = '... Wrong Answer!';        // temporary text

            // change text
            noBtn.textContent = wrongText;
            noBtn.classList.add('wrong-answer'); // if you have styles

            // restore after 1.5 s
            setTimeout(() => {
                noBtn.textContent = originalText;
                noBtn.classList.remove('wrong-answer');
            }, 1500);
            }

            /* ------------------------------------------------------------------
            3️⃣  Helper to load the GIF again with a fresh timestamp
            ------------------------------------------------------------------*/
            function playGif() {
            const timestamp = Date.now(); // unique value to bust cache
            imgEl.src = `./images/mort2.gif?t=${timestamp}`;
            }

            /* ------------------------------------------------------------------
            4️⃣  Attach click listeners
            ------------------------------------------------------------------*/
            yesBtn.addEventListener('click', onYesClicked);
            noBtn.addEventListener('click', onNoClicked);
        </script>
    </body>
</html>